{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Overview \u00b6 Here is my household Home Assistant configuration. I try to keep this document update to truely reflect my Config backup at GitHub, but please bear with me for any inconsistencies. The published version of configruations is working with Integration Core Version: 0.109.6 in HassOS 3.13. I started using Home Assistant two years ago, so there may be some depreciated code/integration still lurking, will try to clean them up. I also write some extended configuration notes in my blog at venkat.ca Follow me on GitHub Document last updated: 18 May 2020","title":"Overview"},{"location":"#overview","text":"Here is my household Home Assistant configuration. I try to keep this document update to truely reflect my Config backup at GitHub, but please bear with me for any inconsistencies. The published version of configruations is working with Integration Core Version: 0.109.6 in HassOS 3.13. I started using Home Assistant two years ago, so there may be some depreciated code/integration still lurking, will try to clean them up. I also write some extended configuration notes in my blog at venkat.ca Follow me on GitHub Document last updated: 18 May 2020","title":"Overview"},{"location":"about/","text":"Home automation logo by Nikita Kozin from the Noun Project Icons made by Creaticca Creative Agency from www.flaticon.com","title":"About"},{"location":"configuration/cameras/","text":"\u00b6 Device Quantity Connection Integration Notes Blink Hub 1 Wi-Fi blink Hub for Blink cameras Blink XT2 2 Blink Hub blink Outdoor cameras; also report temperature and battery status, albeit unreliably. But very good battery life and motion detection. Yi Cam 1 Ethernet ffmpeg Outdoor; with open firmware (see below) Foscam F19803P 1 Ethernet ffmpeg Took a bit of effort to discover the rtsp feed, now is free from calling Foscam cloud. This is now 3 years old. The model may not be available currently. Shinobi 1 Etherrnet Yet to integrate Yi Camera uses Yi-Hack-V4 firmware. I donated $5 and got the code to enable RTSP stream.","title":"Cameras"},{"location":"configuration/cameras/#_1","text":"Device Quantity Connection Integration Notes Blink Hub 1 Wi-Fi blink Hub for Blink cameras Blink XT2 2 Blink Hub blink Outdoor cameras; also report temperature and battery status, albeit unreliably. But very good battery life and motion detection. Yi Cam 1 Ethernet ffmpeg Outdoor; with open firmware (see below) Foscam F19803P 1 Ethernet ffmpeg Took a bit of effort to discover the rtsp feed, now is free from calling Foscam cloud. This is now 3 years old. The model may not be available currently. Shinobi 1 Etherrnet Yet to integrate Yi Camera uses Yi-Hack-V4 firmware. I donated $5 and got the code to enable RTSP stream.","title":""},{"location":"configuration/comfort/","text":"Device Quantity Connection Integration Notes Ecobee 4 1 Wi-Fi ecobee Whole home thermostat, with built-in Amazon Alexa. Ecobee Room Sensor 2 Ecobee 4 ecobee Temperature and Occupancy sensor. Wonder why they did not include humidity sensing. Aqara sensors 4 HUSBZB-1 (Zigbee) Zigbee Temperature, humidity, and occupancy sensors. DIY 3 Wi-Fi ESPHome DHT 22 temperature sensor and humidity sensors on ESP8266 microcontrollers, configured and controlled via ESPHome. Netatmo 1 Wi-Fi Netatmo Indoor CO_2, Air Quality, temperature, and Sound sensors. The outdoor module is not working.","title":"Comfort"},{"location":"configuration/garage/","text":"\u00b6 Device Quantity Connection Integration Notes Chamberlain MyQ Garage Hub 1 Wi-Fi cover DIY 1 Wi-Fi ESPHome DHT 22 temperature sensor and humidity sensors on ESP8266 microcontrollers, configured and controlled via ESPHome.","title":"Garage"},{"location":"configuration/garage/#_1","text":"Device Quantity Connection Integration Notes Chamberlain MyQ Garage Hub 1 Wi-Fi cover DIY 1 Wi-Fi ESPHome DHT 22 temperature sensor and humidity sensors on ESP8266 microcontrollers, configured and controlled via ESPHome.","title":""},{"location":"configuration/hubs/","text":"Device Quantity Connection Integration Notes GoControl HUSBZB-1 1 USB, Zigbee, Z-Wave Zigbee , Z-Wave Dual Zigbee and Z-Wave controller. See here for my notes on making this USB device available to Home Assistant running in a container under Proxmox VE. Lutron Smart Bridge 2 1 Ethernet Lutron Caseta Controls Lutron Caseta in-wall and plug-in light dimmers. A bit expensive, but one of the most reliable part of my home automation. Samsung SmartThings v1 1 Ethernet Smarthings Still controlling a few Zigbee (mostly Ecosmart) lights and Z-Wave locks devices. In its death bed, will soon be migrated to the above dual controller. Hue Hub v1 1 Ethernet Philips Hue This controls all Hue, CREE, and GE Zigbee smart bulbs. Soon to be depreciated by Signify (the new brand name of Philips lighting). I will migrate the bulbs to the above dual controller. ESP-32, NodeMCU 1 Wi-Fi, Bluetooth ESPHome Used as BLE tracker. See Plants section for more information. Sonoff RF Bridge 1 Wi-Fi, RF 433 MHz MQTT Provides Wi-Fi bridge for RF 433 MHz sensors; Tasmota converted.","title":"Hubs"},{"location":"configuration/lighting/","text":"Device Quantity Connection Integration Notes Leviton Decora DZMX1 4 HUSBZB-1 (Z-Wave) Z-Wave In-wall switch, dimmable. Can control LED, Incandescent, CFL, up to 1,000 W. A newer version available from Leviton. Leviton Decora DW6HD-1BZ 3 Wi-Fi Leviton Decora Wi-Fi In-wall switch, dimmable. Can control LED, Incandescent, CFL, up to 600 W. Philips Hue White 8 Hue Hub (Zigbee) Philips Hue Light Dimmable, single-CCT, not sold anymore. Philips Hue White & Color 2 Hue Hub (Zigbee) Philips Hue Light Dimmable, single-CCT, not sold anymore Lutron Caseta Wireless Dimmer 4 Lutron Bridge Lutron Caseta Smart dimmer switches that do not require a neutral wire Lutron Caseta Dimming Smart Plug PD-3PCL-WH-C 2 Lutron Bridge Lutron Caseta Controls two plug-in lamps. Used for controlling old CFL torchieres. Lutron Caseta Pico Wireless Dimmer Switch 3 Lutron Bridge These are packaged remotes for the above dimmers, not directly integrated with HA. Cree Connected 2 Hue Hub (Zigbee) Philips Hue Light Dimmable, single-CCT, not sold anymore Ecosmart PAR 20, White 8 SmartThings (Zigbee) Smarthings Warm-white, dimmable. I bought it on a clearance at CDN $5 apiece. May not be available anymore. Ecosmart PAR 20, Color 2 SmartThings (Zigbee) Smarthings RGB, dimmable. I bought it on a clearance at CDN $6 apiece. May not be available anymore. GE Link Smart LED bulb 2 HUSBZB-1 (Zigbee) Philips Hue Light Dimmable, single-CCT, not very reliable, not sold anymore. Nanoleaf Aurora 1 Wi-Fi Nanoleaf Decorative RGB panels. Generic RGB controller , HF-LPB100 Chipset 1 Wi-Fi Flux LED Cheap ($5) RGB LED string controller used for decorative skylight. Will migrate to Tasmota some day. TP Link HS200 2 Wi-Fi TP-Link Non-dimmable, in-wall switches","title":"Lighting"},{"location":"configuration/media/","text":"Device Quantity Connection Integration Notes Plex Media Server 1 Ethernet Plex / Plex Activity Monitor (1) See below Pi Music Box 1 Ethernet mpd (2) See below Amazon Echo v1 1 Wi-Fi Alexa Media Player (3) See below Amazon Echo Dot 1 Wi-Fi Alexa Media Player (3) See below Alexa in Ecobee4 1 Wi-Fi Alexa Media Player (4) See below (1) Plex server runs in a Raspberry Pi 4, primarily configured as an Openmediavault server, with external USB hard drives. (2) The Pi Music Box is a Raspberry Pi 3B+. It scans and picks up audio files from the same Openmediavault server that runs Plex and provides additional music streaming through the home theatre speakers. (3) Amazon echo devices configured via Nabu Casa (See Voice Assistants Section) do not function as media players. This necessitates using a custom integration Alexa Media Player . I had purchased my first Amazon Echo when it was introduced in the USA (not available in Canada, then) so, it got integrated to my Amazon USA account and I had great difficulty in passing the verification step (which simply kept blanking out, instead of sending OTP to my phone). I enabled Two-Factor Authentication (TFA) for my Amazon account and this helped me generate OTP locally using my Authenticator app and complete the process. (4) Ecobee4 has a built-in Alexa voice assistant which doubles (triples? considering it is primarily a thermostat) up as a medica player via the above custom integration. There are Google Home devices configured throughout the house that can play from thier cloud services and stream from Pi Music Box. These got easily configured as media players via Nabu Casa integration. These are explained in Voice Assistants section.","title":"Media"},{"location":"configuration/other/","text":"Device Quantity Connection Integration Notes R-Pi4 1 Ethernet NA Openmedia vault file server QNAP HS-251 1 Ethernet QNAP Sensor Media server, directly connected to the home theatre QNAP TS-269L 1 Ethernet NA Back up file server, does not integrate with Home Assistant Obihai OBi200 1 Ethernet obihai VOIP adapter, reports VOIP status Brother HL-L2390DW 1 Wi-Fi Brother Printer Reports usage statistics and toner and drum life","title":"Other"},{"location":"configuration/outlets_switches/","text":"Device Quantity Connection Integration Notes Wemo Smart Plug 1 Wi-Fi WeMo Spare smart outlet, currently not being used. TP Link Kasa Smart Plug 2 Wi-Fi TP-Link , Template Sensors Power monitoring smart outlets; used in washing machine automation. A newer model is available. Sonoff Basic R2 6 Wi-Fi MQTT Tasmota converted. White Label ESP8266 Smart Plugs 2 Wi-Fi MQTT Tasmota converted; energy monitoring. CE Smart Home LA-WF3 2 Wi-Fi MQTT Tasmota converted CE Smart Home LA-WF7 2 Wi-Fi esphome Similar to the above model, but report energy usage. Kasa Smart plugs do not automatically report energy usage when using the TP-Link platform. However, template sensors can be created to extract these values. When configured using Integration in the frontend, they are not very reliable. I hard-coded their IP addresses in YAML mode and they are better. Power monitoring values from TP-Link Smart Plugs can be extracted using template sensors. Here is sample code: - platform : template sensors : switch_bed_warmer_amps : friendly_name_template : \"{{ states.switch.bed_warmer}} Current\" value_template : '{{ states.switch.bed_warmer.attributes[\"current_a\"] | float }}' unit_of_measurement : 'A' switch_bed_warmer_watts : friendly_name_template : \"{{ states.switch.bed_warmer}} Current Consumption\" value_template : '{{ states.switch.bed_warmer.attributes[\"current_power_w\"] | float }}' unit_of_measurement : 'W' switch_bed_warmer_total_kwh : friendly_name_template : \"{{ states.switch.bed_warmer}} Total Consumption\" value_template : '{{ states.switch.bed_warmer.attributes[\"total_energy_kwh\"] | float }}' unit_of_measurement : 'kWh' switch_bed_warmer_volts : friendly_name_template : \"{{ states.switch.bed_warmer}} Voltage\" value_template : '{{ states.switch.bed_warmer.attributes[\"voltage\"] | float }}' unit_of_measurement : 'V' switch_bed_warmer_today_kwh : friendly_name_template : \"{{ states.switch.bed_warmer}} Today's Consumption\" value_template : '{{ states.switch.bed_warmer.attributes[\"today_energy_kwh\"] | float }}' unit_of_measurement : 'kWh' CE Smart LA-WF7 is now running on esphome, but require an intermediate tasmota firmware through Tuya Convert hack. Compated to TP Link Kasa smart plugs these are more reliable in reporting energy usage. Esphome makes extracting energy data very easy, compared to using MQTT to connect and creating a series of template sensors. At $10 apiece, these are of very good value.","title":"Outlets switches"},{"location":"configuration/plants/","text":"Device Quantity Connection Integration Notes Xiaomi Flower Care 2 Bluetooth ESPHome ; plant See below Aquara sensor 1 HUSBZB-1 (Zigbee) Zigbee Temperature, humidity, and occupancy sensors, used closer to plants for monitoring. I run a Bluetooth Tracker based on ESPHome in a ESP32. Under the platform xiaomi_hhccjcy01 this easily identifies the Xiami Flower Care sensors. The plant component then merges the moisture, conductivity, light intensity, temperature and battery level for a plant into a single UI element.","title":"Plants"},{"location":"configuration/retired/","text":"Device Quantity Connection Integration Notes Wink Hub v1 1 Ethernet NA My first foray into home automation. Was very limted and very frustrating. Orvibo Hub 1 Ethernet NA I picked it up in a trade show in China, along with a motion sensor, a contact sensor, a camera, and an RF link. The sensors are now used via Zigbee. The Camera and RF link are useless. Cacoon Camera 1 Ethernet NA A pre-production unit. Does not integrate with anything Orvibo Smart Plug S31 1 Ethernet NA One of the most aesthetically designed smart plugs. Does not integrate easily with anything. Should be based on ESP and there should be a way to convert to Tasmota or ESPHome","title":"Retired"},{"location":"configuration/safety/","text":"Device Quantity Connection Integration Notes Nest Protect 3 Z-Wave Nest Fire, Carbon Monoxide Sensors. Currently not working as Google has deprecated the API. Aqara Water Sensors 2 HUSBZB-1 (Zigbee) Zigbee Not very reliable SmartThings Water Leak Sensor 1 Zigbee SmartThings Also includes temperature and humidity sensor. Netatmo Weather Station 1 Wi-Fi Netatmo Indoor CO_2, Air Quality, temperature, and Sound sensors. The outdoor module is not working.","title":"Safety"},{"location":"configuration/security/","text":"Device Quantity Connection Integration Notes Schlage Connect Touchscreen Deadbolt 2 Z-Wave Smarthings Aqara Contact Sensor 2 HUSBZB-1 (Zigbee) Zigbee Aquara PIR Motion Sensor 2 HUSBZB-1 (Zigbee) Zigbee Sonoff DW1 Contact Sensor 2 Sonoff RF Bridge MQTT Alfawise Contact Sensor 3 Sonoff RF Bridge MQTT Alfawise PIR motion Sensor 4 Sonoff RF Bridge MQTT Sonoff motion Sensor 2 Sonoff RF Bridge MQTT Orvibo Motion Sensor 1 HUSBZB-1 (Zigbee) Zigbee Not reliable Orvibo Contact Sensor 1 SmartThings (Zigbee) SmartThings Not reliable RF 433 MHz sensors are very cheap, typically about $5 and work reliably with Sonoff RF Bridge (Tasmota converted) and via MQTT integration.","title":"Security"},{"location":"configuration/sensors/","text":"Device Quantity Connection Integration Notes Nest Protect v2 Battery 3 Wi-Fi Nest Dual Smoke and CO Alarm. One of the best fire/carbon monoxide alarms. But recently Google has removed API access, and so the integration with Home Assistant is no longer working. Aqara Vibration Sensor 2 Zigbee Binary Sensor I purchased it to automate (getting end of the cycle notificatoins) from my washing machine and dryer. Not reliably automated yet. I wrote a script to blink Philips Hue bulbs when there is an alarm from Nest Protect. Now that the Nest integration is broken, this has become useless.","title":"Sensors"},{"location":"configuration/server/","text":"I repurposed an old Mac Mini ( circa 2014 ). Dual-core Intel i5 (Haswell ULT), at 2.7 GHz 4 GB RAM 1 TB SSD (Samsung SSD 860 QVO) It runs Proxmox VE , an open-source Virtualization Platform, on a skeletal Debian. The Home Assistant runs in a container, with no restrictions on CPU, Memory, or disk space utilization. Along with this I run WeeWx weather server on another.","title":"Server"},{"location":"configuration/services/","text":"Device Quantity Connection Integration Notes iOS App 2 NA Various Mobile interface and presence detection in cell phone. Wall-mounted Gen 2 iPAD for general use. Android App 4 NA Various 3 other mobile phones and 1 Samsung Tablet. AdGuard Home 1 Ethernet AdGuard Ad and malware blocking at the router level. I recently moved from Pi-Hole to AdGuard. Yet to see any difference. Pi-hole 1 Ethernet Pi-Hole Sensor Configured in Raspberry Pi 2 connected directly to the primary router for ad blocking. (Deprecated, see above) AirVisual 1 Ethernet Airvisual Custom Shell script for managing Integration OpenUV 1 Cloud Openuv UV and Ozone data Environment Canada 1 Cloud Environment Canada Official weather service by Goverrnment of Canada Dark Sky 1 Cloud Dark Sky See below COVID-19 1 Cloud Coronavirus The data sourced from the Johns Hopkins University Caution On March 31, 2020 Dark Sky was acquired by Apple and is no longer allowing new API registrations. The Dark Sky API will continue to function for existing users through the end of 2021, but it is no longer possible to obtain an API key for new users.","title":"Services"},{"location":"configuration/todo/","text":"Device Quantity Connection Integration Notes Ecowitt 1 Ethernet ?? I purchased this a while ago. This contains an indoor and an outdoor temperature and humidity sensor. One of the best low-cost personal weather stations, IMHO. This is modular and extensible (rain, wind, particle, lightining sensors...)Yet to find a good way to integrate. WeeWx 1 Ethernet ?? Configured for the Ecowitt. There are scripts available to integrate with HA, yet to do that.","title":"Todo"},{"location":"configuration/unintegrated/","text":"Device Quantity Connection Integration Notes Saeco Granbaristo Avanti 1 Bluetooth ?? A great super-automatic coffee machine with a good app. Sadly no way to integrate Orvibo Camera 1 Ethernet ?? Suppose to have ONVIF but difficult to integrate Blink Cameras 2 Ethernet ?? Used to work with HA, until recently. Amazon pulled off the support Nest Protect 3 Ethernet ?? Again, used to integratte well with HA, until Google pulled it off.","title":"Unintegrated"},{"location":"configuration/voice_assistant/","text":"Device Quantity Connection Integration Notes Nest Hub 1 Wi-Fi via Nabu Casa Panel display and voice assistant Google Home 1 Wi-Fi via Nabu Casa Voice assistant Google Home Mini 1 Wi-Fi via Nabu Casa Voice assistant Amazon Echo 1 Wi-Fi via Nabu Casa Voice assistant Amazon Echo Dot 1 Wi-Fi via Nabu Casa Voice Assistant","title":"Voice assistant"},{"location":"lovelace/Comfort/","text":"Climate and Comfort","title":"Comfort"},{"location":"lovelace/Frontend/","text":"I made a custom theme influenced by Gruvbox Dark (a retro groove colour theme for VIM, iTerm2, VSCode, etc.). You can download that from my github repository here . I am using an iPAD Gen3, wall-mounted as a kiosk display to provide easy access to guests. (will upload the picture soon) Here are the screenshots with some notes on the views.","title":"Frontend"},{"location":"lovelace/basement/","text":"Basement, Laundry, and Furnace rooms","title":"Basement"},{"location":"lovelace/family_room/","text":"Family Room and Entertainment view","title":"Family room"},{"location":"lovelace/ground_floor/","text":"Living and Dining Room, Kitchen, Hallway, and Bathroom in the ground floor.","title":"Ground floor"},{"location":"lovelace/home_screen/","text":"The Home screen presents an overview of most useful integrations and their status. This include an overview of security, lights, media, indoor comfort, presence detection, Home Assistant server status, and outdoor environment. Fine-grained control of everything is available in the respective room views.","title":"Home screen"},{"location":"lovelace/outside/","text":"Porch, Driveway, and Backyard","title":"Outside"},{"location":"lovelace/plants/","text":"Plants monitoring, garbage collection, and recycling","title":"Plants"},{"location":"lovelace/servers/","text":"Servers, and Adware/Malware Control Status","title":"Servers"},{"location":"lovelace/upstairs/","text":"","title":"Upstairs"},{"location":"lovelace/vitals/","text":"Battery charge levels, Wireless signal strength, etc.","title":"Vitals"},{"location":"themes/gruvbox_dark/","text":"Gruvbox Dark # Gruvbox Dark: A retro groove colour theme, based on a theme for VIM at https://github.com/morhetz/gruvbox # Creater: Venkat Venkataramanan # Website: http://venkat.ca # My Home Assistant Config files: https://github.com/torvenkat/Home-AssistantConfig # # Gruvbox Dark : # Header: app-header-background-color : \"#282828\" app-header-text-color : \"#d5c4a1\" # Main Interface Colors primary-color : \"#fe8019\" light-primary-color : var(--primary-color) primary-background-color : \"#282828\" secondary-background-color : var(--primary-background-color) divider-color : var(--primary-background-color) # Text primary-text-color : \"#bdae93\" secondary-text-color : \"#bdae93\" text-primary-color : \"#fbf1c7\" disabled-text-color : \"#504945\" # Sidebar Menu sidebar-icon-color : var(--app-header-text-color) sidebar-text-color : '#a89984' sidebar-background-color : \"#282828\" sidebar-selected-background-color : var(--primary-background-color) sidebar-selected-icon-color : \"#d65d0e\" sidebar-selected-text-color : var(--sidebar-selected-icon-color)) # States and Badges state-icon-color : \"#928374\" state-icon-active-color : \"#fe8019\" state-icon-unavailable-color : var(--disabled-text-color) # Sliders paper-slider-knob-color : \"#fe8019\" paper-slider-knob-start-color : var(--paper-slider-knob-color) paper-slider-pin-color : var(--paper-slider-knob-color) paper-slider-active-color : var(--paper-slider-knob-color) paper-slider-secondary-color : var(--light-primary-color) # Labels label-badge-background-color : \"#1d22021\" label-badge-text-color : \"#BDC1C6\" label-badge-red : \"#cc241d\" label-badge-green : \"#98971a\" label-badge-blue : \"#458588\" label-badge-yellow : \"#d79921\" label-badge-gray : \"#a89984\" # Cards ha-card-border-radius : \"15px\" ha-card-box-shadow : 0px paper-card-background-color : \"#3c3836\" paper-listbox-background-color : \"#282828\" # Switches switch-checked-button-color : \"#fe8019\" switch-checked-track-color : \"#c44221\" switch-unchecked-button-color : \"#a89984\" switch-unchecked-track-color : \"#b9aeac\" # Toggles paper-toggle-button-checked-button-color : var(--switch-checked-button-color) paper-toggle-button-checked-bar-color : var(--switch-checked-track-color) paper-toggle-button-unchecked-button-color : var(--switch-unchecked-button-color) paper-toggle-button-unchecked-bar-color : var(--switch-unchecked-track-color) # Table table-row-background-color : var(--primary-background-color) table-row-alternative-background-color : var(--secondary-background-color) data-table-background-color : var(--primary-background-color)","title":"Gruvbox dark"}]}